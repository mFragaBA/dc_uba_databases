<!DOCTYPE HTML>
<html lang="es" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Práctica - 26/08 - Apuntes de Bases de Datos - 2c2022</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduccion.html">Introduccion</a></li><li class="chapter-item expanded affix "><li class="part-title">Primer Parcial</li><li class="chapter-item expanded "><a href="../teoricas/index.html"><strong aria-hidden="true">1.</strong> Teórica</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../teoricas/17_08.html"><strong aria-hidden="true">1.1.</strong> Teórica - 17/08</a></li><li class="chapter-item expanded "><a href="../teoricas/24_08.html"><strong aria-hidden="true">1.2.</strong> Teórica - 24/08</a></li></ol></li><li class="chapter-item expanded "><a href="../practicas/index.html"><strong aria-hidden="true">2.</strong> Práctica</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../practicas/19_08.html"><strong aria-hidden="true">2.1.</strong> Práctica - 19/08</a></li><li class="chapter-item expanded "><a href="../practicas/26_08.html" class="active"><strong aria-hidden="true">2.2.</strong> Práctica - 26/08</a></li></ol></li><li class="chapter-item expanded "><a href="../guias/index.html"><strong aria-hidden="true">3.</strong> Guías de Ejercicios</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guias/g1.html"><strong aria-hidden="true">3.1.</strong> Guía de Ejercicios 1</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Segundo Parcial</li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="../misc/contributors.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Apuntes de Bases de Datos - 2c2022</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/mFragaBA/dc_uba_databases" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="práctica---2608"><a class="header" href="#práctica---2608">Práctica - 26/08</a></h1>
<h2 id="crt---cálculo-relacional-de-tuplas"><a class="header" href="#crt---cálculo-relacional-de-tuplas">CRT - Cálculo Relacional de Tuplas</a></h2>
<h3 id="ejercicio-1"><a class="header" href="#ejercicio-1">Ejercicio 1</a></h3>
<blockquote>
<p>Listar nombre y salario  de aquellos empleados que trabajan en el
Depto cuyo detalle es <strong>RRHH</strong></p>
</blockquote>
<p>Sol:</p>
<p>\[
\{ t / \exists e \in \text{EMPLEADO} \land \exists d \in \text{DEPARTAMENTO} \\
\land d.\text{detalle} = \text{RRHH} \land e.\text{depto} = d.\text{IDD} \\
\land t.\text{nombre} = e.\text{nombre} \land t.\text{salario} = e.\text{salario}\}
\]</p>
<h3 id="ejercicio-2"><a class="header" href="#ejercicio-2">Ejercicio 2</a></h3>
<p>Proveedores(<strong>idProv</strong>, nombre, direccion)
Productos(<strong>idProd</strong>, nombre, color)
Catalogo(<strong>idProv</strong>, <strong>idProd</strong>, precio)</p>
<blockquote>
<ul>
<li>Encontrar los nombres de los proveedores que proveen algún
producto rojo.</li>
<li>Buscar los idProv para los proveedores que proveen todos los
productos.</li>
<li>Buscar los nombres de productos que no están en ningún catálogo.</li>
</ul>
</blockquote>
<p>Sol:</p>
<p>a)
\[
\{ t / \exists prov \in \text{PROVEEDOR} \land \exists pr \in \text{PRODUCTO} \land \exists c \in \text{CATALOGO} \\
\land pr.\text{color} = \text{&quot;rojo&quot;} \land pr.\text{idProd} = c.\text{idProd} \\
\land prov.\text{idProv} = c.\text{idProv} \}
\]
b)
\[
\{ t / \forall prod \in \text{PRODUCTO} \implies \exists c \in \text{CATALOGO} \\
\land c.\text{idProd} = prod.\text{idProd} \land c.\text{idProv} = t.\text{idProv} \}
\]
c)
\[
\{ t / \exists prod \in \text{PRODUCTO} \land \nexists c \in \text{CATALOGO} \\
\land c.\text{idProd} = prod.\text{idProd} \land prod.\text{nombre} = t.\text{nombre} \}
\]</p>
<blockquote>
<p>bonus: encontrar los nombres de los proveedores que proveen <strong>todos
los productos rojos</strong></p>
</blockquote>
<p>Sol:</p>
<p>How about:
\[
\{ t / \forall prod \in \text{PRODUCTO} \land prod.\text{color} = \text{&quot;rojo&quot;} \implies \exists c \in \text{CATALOGO} \\
\land c.\text{idProd} = prod.\text{idProd} \land c.\text{idProv} = t.\text{idProv} \}
\]</p>
<p>Si no tengo productos rojos?: We're screwed. La precondición del
implica siempre es falsa, el implica es verdadero</p>
<p>Y antes en el <strong>b)</strong> no tenía ese problema? Bueno, sí... pero el uno
caso en que eso pasa es cuando no hay productos y estoy predicando
sobre el conj. vacío de tuplas. No nos va a interesar mucho eso,
aunque podría chequearlo si tengo ganas</p>
<p>Entonces puedo probar con
\[
\{ t / (\exists prod' \in \text{PRODUCTO} \land prod'.\text{color} = \text{&quot;rojo&quot;}) \land \\
\forall prod \in \text{PRODUCTO} \left( prod.\text{color} = \text{&quot;rojo&quot;} \implies \exists c \in \text{CATALOGO} \\
\left( c.\text{idProd} = prod.\text{idProd} \land c.\text{idProv} = t.\text{idProv} \land \exists prov \in \text{PROVEEDORES} \\
\left( prov \in \text{PROVEEDOR} \land c.\text{idProv} = prov.\text{idProv} \land prov.\text{nomre} = t.\text{nombre} \right)\right)\right)\}
\]</p>
<h3 id="ejercicio-3"><a class="header" href="#ejercicio-3">Ejercicio 3</a></h3>
<blockquote>
<p>Listar el nombre de los empleados que no tienen Supervisor asignado</p>
</blockquote>
<p>Skipped</p>
<h2 id="ar---Álgebra-relacional"><a class="header" href="#ar---Álgebra-relacional">AR - Álgebra Relacional</a></h2>
<p>Ops:</p>
<p>\[
R \cup S \\
R \cap S \\
R / S \\
R - S \\
\rho \left( a1 \rightarrow a2, b1 \rightarrow b2, R \right) \\
\sigma_{predicado}(R) \\
\Pi_{campos}(R)
\]</p>
<h3 id="ejercicios"><a class="header" href="#ejercicios">Ejercicios</a></h3>
<p>Se vieron medio por arriba</p>
<h3 id="ejercicio-de-parcial"><a class="header" href="#ejercicio-de-parcial">Ejercicio de parcial</a></h3>
<blockquote>
<p>Dado el siguiente esquema:</p>
<p>Participantes(<strong>_nombreEvento_, _idPersona_</strong>)
Persona(<strong>idPersona</strong>, nombre, apellido, _idProfesion_)
Profesion(<strong>idProfesion</strong>, nombre)</p>
<ol>
<li>Resolver en AR y CRT: Los nombres de las profesiones tales que las
personas de esa profesión hayan participado en todos los eventos
menos en uno</li>
</ol>
</blockquote>
<ul>
<li>AR
<ul>
<li>Idea: busco a los que fueron a todos los eventos y a los que
faltaron a al menos 2 eventos. Luego tomo todos y los resto</li>
</ul>
</li>
<li>CRT
<ul>
<li>Idea: lo interesante es encontrar, para una profesión fijada, si
todas las personas de esa profesión participaron de todos los
eventos salvo uno
<ul>
<li>Chequear que una persona tiene esa profesión es fácil</li>
<li>Lo siguiente es ver que esa persona <strong>participo en todos los
eventos menos en uno</strong>
<ul>
<li>Basta con ver que hay un evento al que faltó, y al resto (toda
entrada de Participantes) asistió</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Sol en clase:</p>
<ul>
<li>AR:
<ul>
<li>partir en cachitos la consulta e ir de a poco</li>
<li>usar buenos nombres</li>
<li>a veces conviene ir por complementos y restar cosas</li>
<li>el producto cartesiano (y luego usar un predicado de selección) es
nuestro mejor amigo</li>
</ul>
</li>
<li>CRT: va por este lado. Algunas &quot;enseñanzas&quot; que quedaron:
<ul>
<li>Algunas &quot;enseñanzas&quot;:
<ul>
<li><strong>USAR MACROS</strong>, a.k.a funciones auxiliares, a.k.a reemplazos sintácticos</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="modelo-relacional"><a class="header" href="#modelo-relacional">Modelo Relacional</a></h2>
<p>Algunos Conceptos importantes</p>
<ul>
<li><strong>superclave</strong>: cualquier conjunto de atributos que me permite
reconocer una tupla</li>
<li><strong>clave</strong>: es un conjunto minimal que define unívocamente una tupla</li>
</ul>
<p>Las relaciones pueden tener muchas claves:</p>
<ul>
<li>A las claves se las llaman claves <strong>candidatas</strong></li>
<li>A la que elijo es la <strong>clave privada</strong></li>
<li>A las que referencian a tuplas de otra relacion son las <strong>claves
foráneas</strong></li>
</ul>
<p>Además tengo <strong>integrity constraints</strong> que son propiedades que todo el
tiempo se verifican. Por ejemplo, una constrait de integridad
referencial (todo lo que referencio existe)</p>
<h3 id="pasaje-de-der-a-modelo-relacional"><a class="header" href="#pasaje-de-der-a-modelo-relacional">Pasaje de DER a Modelo Relacional</a></h3>
<p>Es repaso del apunte, pero algo interesante que mencionó es con las
ternarias. Como armo una nueva tabla, la clave de esa nueva tabla
tiene que poder determinar la tupla. Notar que en algunos casos
significa que con 1 alcanza (tengo varios para elegir), otras con 2 (y
tengo varios pares), otras 2 pero es único y a veces tienen que ir los
2</p>
<p>En jerarquías recordar:</p>
<ul>
<li>poner el discriminante si es disjunta
<ul>
<li>Además, las que no tengan atributos se pueden ahorrar la creación
de la tabla</li>
</ul>
</li>
<li>no ponerlo si hay overlapping</li>
</ul>
<p>nota: en el <u>parcial</u>, mantener consistencia entre el DER y el modelo relacional</p>
<h3 id="ejercicio-der--modelo-relacional"><a class="header" href="#ejercicio-der--modelo-relacional">Ejercicio DER + Modelo Relacional</a></h3>
<p>Esto uno lo hace una vez que arma el modelo, pero para que no se
pierda esto: <strong>revisen las preguntas</strong>, son claves para ver si tu
modelo lo hiciste bien o te falta algo. Vas a tener que pensar cómo
recuperás la info que te piden, seguí los caminitos en el DER.</p>
<p>Entidades:</p>
<ul>
<li>Profesor</li>
<li>Alumno (Esto hintea una jerarquía)
<ul>
<li>Trabajador
<ul>
<li>Trabaja en una Empresa</li>
</ul>
</li>
<li>Desempleado</li>
</ul>
</li>
<li>Curso</li>
<li>Cursada (Por qué? porque la fecha de inicio del curso es la misma
para todos, si lo tengo que poner cada vez que alguien se anota
tengo muchos datos repetidos)
<ul>
<li>El curso es una cursada</li>
<li>El Alumno cursa una Cursada (y tiene nota su cursada)
<ul>
<li>Y qué nota le pongo al principio??? (<strong>creo</strong> que lo terminamos
ignorando, o capaz la relación se carga una vez que terminó la
cursada y no tengo problemas)</li>
</ul>
</li>
<li>Un Profesor (participación parcial) da una Cursada</li>
</ul>
</li>
<li>Empresa</li>
</ul>
<p>La consigna dice que el que no trabaja, el curso es gratis (con un límite). Pero más
allá de eso no se dice nada. Así que eso último no es relevante para
el problema.</p>
<blockquote>
<p>Cursada entidadd débil de curso? Goooood. Tiene sentido, porque una
cursada la puedo identificar con el id del curso y la fecha de
inicio</p>
</blockquote>
<blockquote>
<p><strong>Warning:</strong> Esto <strong>NO</strong> es un DER, si tengo tiempo lo agrego (PRs
agregándolo are welcome as well)</p>
</blockquote>
<p>Para la pregunta sobre la facturas, la modelamos como una entidad y la
agregamos a la relación de la inscripción de la cursada haciendo que
sea una ternaria.</p>
<ul>
<li>Ojo con la cardinalidad porque cambia</li>
<li>Asumimos que la factura de la dan al momento de inscribirte al
curso. Si no tendrías que hacerlo con una agregación.</li>
</ul>
<p><strong>Pasaje a relacional:</strong></p>
<p>Profesor(<strong>DNI</strong>, nombre, apellido, direccion, telefono)</p>
<p>Alumno(<strong>DNI</strong>, nombre, apellido, direccion, telefono, fechaNacimiento, condLaboral)</p>
<p>AlumnoTrabajador(<strong><u>DNI</u></strong>, cuil, fechaIngreso, <u>CUIT</u>)</p>
<p>AlumnoDesempleado(<strong><u>DNI</u></strong>)</p>
<ul>
<li>este es medio polémico, yo lo sacaría porque no aporta nada</li>
</ul>
<p>Curso(<strong>codCurso</strong>, programa, duracion, titulo)</p>
<p>Cursada(<strong><u>codCurso</u>, fechaInicio</strong>, fechaFin, <u>DNI</u>)</p>
<ul>
<li>El DNI es del profesor</li>
</ul>
<p>Empresa(<strong>CUIT</strong>, razonSocial, direccion, telefono)</p>
<p>Factura(<strong>nro</strong>, importe, fecha)</p>
<p>InscriptoPago(<strong><u>DNI</u>, <u>nro</u></strong>, <u>fechaInicio</u>, <strong><u>idCurso</u></strong>, nota)</p>
<ul>
<li>El DNI es de alumno</li>
</ul>
<p>InscriptoGratis(<strong><u>DNI</u>, <u>FI, idCurso</u></strong>, nota)</p>
<blockquote>
<p>AlumnoDesempleado no tiene tabla? No, porque no tiene atributos ni
tiene relaciones específicas.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../practicas/19_08.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../guias/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../practicas/19_08.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../guias/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../mermaid.min.js"></script>
        <script type="text/javascript" src="../mermaid-init.js"></script>
    </body>
</html>
